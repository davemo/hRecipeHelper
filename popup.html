<script type="text/javascript" src="jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="formData.js"></script>
<script>

	function loadBlogData() {
		console.log("Load Blog posting info here if on a current posting.");
//if not on blogger, try to get current field on page for poosting results into.
	}
	
	$(document).ready(loadBlogData);


	function postData() {
		var formData = new FormData();		
		formData.$recname = $('#Rec-Name').val();		
		formData.$ingredients = getFormArray('ingredient');
		formData.$yield = $('#yield').val();
		formData.$duration = $('#duration').val();
		formData.$photo = $('#photo').val();
		formData.$author = $('#author').val();
		formData.$published = $('#published').val();
		
		formData.$nutritions = getFormArray('nutrition');
		formData.$tags = $('#tag').val();
		
		chrome.extension.getBackgroundPage().setData(formData);
		window.close();
	}
	
	function getFormArray(id) {
		return $("input[id='"+id+"']").map(function(){return $(this).val();}).get();
	}
</script>
<style>
body {
  min-width:357px;
  overflow-x:hidden;
}
</style>
<html>
<head>
</head>
<body>
<h3>New Recipe</h3>
<div><label for="Rec-Name">Name</label><input type="text" id="Rec-Name" name="Rec-Name"/></div>
<div><label for="ingredient">Ingredient</label><input type="text" id="ingredient" name="ingredient"/></div>
<div><label for="ingredient">Ingredient</label><input type="text" id="ingredient" name="ingredient"/></div>
<div><label for="ingredient">Ingredient</label><input type="text" id="ingredient" name="ingredient"/></div>
<div><label for="yield">Yield</label><input type="text" id="yield" name="yield"/></div>
<div><label for="instructions">Instructions</label><textarea id="instructions" name="instructions" rows="4" cols="20"></textarea></div>
<div><label for="duration">Duration</label><input type="text" id="duration" name="duration"/></div>
<div><label for="photo">Photo</label><input type="text" id="photo" name="photo"/></div>
<div><label for="summery">Summery</label><input type="text" id="summery" name="summery"/></div>
<div><label for="author">Author</label><input type="text" id="author" name="author"/></div>
<div><label for="published">Published</label><input type="text" id="published" name="published"/></div>
<div><label for="nutrition">Nutrition</label><input type="text" id="nutrition" name="nutrition"/></div>
<div><label for="nutrition">Nutrition</label><input type="text" id="nutrition" name="nutrition"/></div>
<div><label for="tag">Tags</label><input type="text" id="tag" name="tag"/></div>
<div><input type="button" id="ok" value="Insert" onClick='postData();'></div>
</body>
</html>
